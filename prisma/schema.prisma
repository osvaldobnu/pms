generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       String  @id @default(cuid())
  name     String?
  email    String  @unique
  password String
}

model Property {
  id          String  @id @default(cuid())
  name        String
  title       String
  description String?
  phone       String?
  ranking     Int?

  location      String?
  locationNotes String?
  beach         String?

  guests        Int
  bedrooms      Int
  beds          Int
  amenities     String?
  extraGuestFee Float?

  cleaningFee Float? // NOVO CAMPO

  // Configuração de camas
  crib         Int?
  childBed     Int?
  doubleBed    Int?
  foldingBed   Int?
  kingBed      Int?
  mezzanineBed Int?
  queenBed     Int?
  sofaBed      Int?
  singleBed    Int?

  lowSeason  Float
  highSeason Float    @default(0) // NOVO CAMPO
  holidays   Float
  christmas  Float
  newYear    Float
  carnival   Float
  active     Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  reservations Reservation[]
}

model Reservation {
  id           String  @id @default(cuid())
  code         String  @unique
  guestName    String
  contactPhone String?
  origin       String?
  guestCount   Int?

  checkIn    DateTime
  checkOut   DateTime
  totalValue Float
  notes      String?

  paymentMethod         String?
  paymentStatus         String?
  secondInstallmentDate DateTime?
  thirdInstallmentDate  DateTime?
  commissionTotal       Float?

  cleaningFee   Float? // Taxa de Faxina
  monetaryValue Float? // Valor Monetário

  propertyId String
  property   Property @relation(fields: [propertyId], references: [id])

  canceled Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
